import React, { useState, useEffect } from 'react';
import { Search, Calculator, Database, Save, Settings, CheckCircle2, RefreshCw } from 'lucide-react';

const RetificadoraApp = () => {
  const [activeTab, setActiveTab] = useState('consulta');
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedMotor, setSelectedMotor] = useState(null);
  const [loading, setLoading] = useState(false);
  
  const [tipoRetifica, setTipoRetifica] = useState('biela');
  const [medidaAtual, setMedidaAtual] = useState('');
  const [medidaCorte, setMedidaCorte] = useState('');
  const [resultadoCalc, setResultadoCalc] = useState(null);
  
  const [novoMotor, setNovoMotor] = useState({
    marca: '',
    carro: '',
    motor: '',
    fixo: '',
    biela: '',
    lateral: '',
    curso: '',
    mancal: '',
    diametro: '',
    altura: '',
    ferro: ''
  });

  // ðŸ”¥ URL CORRIGIDA - Use a mesma do seu backend
  const SHEETS_URL = 'https://script.google.com/macros/s/AKfycbzE78vpU82j0h9oz1iUxpeDJ3IypHqtiUb9TMq23kmPsau3WZj-X-Zsr0tIfiEwdNjhEA/exec';

  const [motores, setMotores] = useState([]);

  // ðŸ”¥ FUNÃ‡ÃƒO CORRIGIDA para carregar motores
  const carregarMotores = async () => {
    setLoading(true);
    try {
      console.log('ðŸ“¡ Iniciando carregamento de motores...');
      
      const response = await fetch(`${SHEETS_URL}?function=getEixos`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({})
      });
      
      if (!response.ok) {
        throw new Error(`Erro HTTP: ${response.status}`);
      }
      
      const result = await response.json();
      console.log('ðŸ“Š Resposta do backend:', result);
      
      if (result.success && result.data && result.data.length > 0) {
        const motoresDoSheets = result.data.map(m => ({
          id: m.id,
          marca: m.marca || '',
          carro: m.carro || '',
          motor: m.motor || '',
          fixo: parseFloat(m.fixo) || 0,
          biela: parseFloat(m.biela) || 0,
          lateral: parseFloat(m.lateral) || 0,
          curso: parseFloat(m.curso) || 0,
          mancal: m.mancal || '',
          diametro: m.diametro || '',
          altura: m.altura || '',
          ferro: m.ferro || ''
        }));
        
        console.log('âœ… Motores processados:', motoresDoSheets.length);
        setMotores(motoresDoSheets);
        
        alert(`âœ… ${motoresDoSheets.length} motores carregados do Google Sheets!`);
      } else {
        alert('âš ï¸ Nenhum motor encontrado ou erro na resposta');
        console.log('Resposta vazia ou com erro:', result);
      }
    } catch (error) {
      console.error('âŒ Erro ao carregar:', error);
      alert('âŒ Erro ao carregar: ' + error.message);
    } finally {
      setLoading(false);
    }
  };

  // ðŸ”¥ FUNÃ‡ÃƒO CORRIGIDA para pesquisar
  const pesquisarMotores = async (termo) => {
    if (!termo.trim()) {
      carregarMotores();
      return;
    }

    setLoading(true);
    try {
      console.log('ðŸ” Pesquisando:', termo);
      
      const response = await fetch(`${SHEETS_URL}?function=searchEixos`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ termo })
      });
      
      if (!response.ok) {
        throw new Error(`Erro HTTP: ${response.status}`);
      }
      
      const result = await response.json();
      console.log('ðŸ” Resultado da pesquisa:', result);
      
      if (result.success && result.data) {
        const motoresFiltrados = result.data.map(m => ({
          id: m.id,
          marca: m.marca || '',
          carro: m.carro || '',
          motor: m.motor || '',
          fixo: parseFloat(m.fixo) || 0,
          biela: parseFloat(m.biela) || 0,
          lateral: parseFloat(m.lateral) || 0,
          curso: parseFloat(m.curso) || 0,
          mancal: m.mancal || '',
          diametro: m.diametro || '',
          altura: m.altura || '',
          ferro: m.ferro || ''
        }));
        
        setMotores(motoresFiltrados);
        alert(`ðŸ” ${result.total} resultado(s) para "${termo}"`);
      }
    } catch (error) {
      console.error('âŒ Erro na pesquisa:', error);
      alert('âŒ Erro na pesquisa: ' + error.message);
    } finally {
      setLoading(false);
    }
  };

  // ðŸ”¥ FUNÃ‡ÃƒO CORRIGIDA para salvar motor
  const salvarMotor = async () => {
    // ValidaÃ§Ã£o dos campos obrigatÃ³rios
    if (!novoMotor.marca || !novoMotor.carro || !novoMotor.motor || !novoMotor.biela || !novoMotor.curso) {
      alert('âŒ Preencha os campos obrigatÃ³rios:\n\n- Marca\n- Carro\n- Motor\n- Biela\n- Curso');
      return;
    }

    setLoading(true);
    try {
      console.log('ðŸ’¾ Salvando novo motor:', novoMotor);
      
      const response = await fetch(`${SHEETS_URL}?function=addEixo`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(novoMotor)
      });
      
      if (!response.ok) {
        throw new Error(`Erro HTTP: ${response.status}`);
      }
      
      const result = await response.json();
      console.log('âœ… Resposta do salvamento:', result);
      
      if (result.success) {
        // Recarregar a lista apÃ³s salvar
        await carregarMotores();
        
        // Limpar formulÃ¡rio
        setNovoMotor({
          marca: '',
          carro: '',
          motor: '',
          fixo: '',
          biela: '',
          lateral: '',
          curso: '',
          mancal: '',
          diametro: '',
          altura: '',
          ferro: ''
        });
        
        alert('âœ… Motor cadastrado com sucesso!');
        setActiveTab('consulta');
      } else {
        alert('âŒ Erro ao cadastrar: ' + (result.error || 'Erro desconhecido'));
      }
    } catch (error) {
      console.error('âŒ Erro ao salvar:', error);
      alert('âŒ Erro ao cadastrar: ' + error.message);
    } finally {
      setLoading(false);
    }
  };

  // Carregar motores automaticamente ao abrir a aplicaÃ§Ã£o
  useEffect(() => {
    carregarMotores();
  }, []);

  // Filtro local para busca em tempo real
  const motoresFiltrados = motores.filter(motor =>
    motor.marca.toLowerCase().includes(searchTerm.toLowerCase()) ||
    motor.carro.toLowerCase().includes(searchTerm.toLowerCase()) ||
    motor.motor.toLowerCase().includes(searchTerm.toLowerCase())
  );

  // CÃ¡lculo automÃ¡tico da medida de corte
  useEffect(() => {
    if (selectedMotor && medidaAtual) {
      const medidaStd = tipoRetifica === 'biela' ? selectedMotor.biela : parseFloat(selectedMotor.mancal.split('/')[0]);
      const atual = parseFloat(medidaAtual);
      
      if (atual && atual < medidaStd) {
        const diferencaAtual = medidaStd - atual;
        const medidasPossiveis = [0.25, 0.50, 0.75, 1.00];
        
        for (let medida of medidasPossiveis) {
          if (diferencaAtual < medida) {
            setMedidaCorte((medidaStd - medida).toFixed(2));
            return;
          }
        }
        setMedidaCorte((medidaStd - 1.00).toFixed(2));
      }
    }
  }, [medidaAtual, selectedMotor, tipoRetifica]);

  const calcularDeslocamento = () => {
    if (!selectedMotor || !medidaAtual || !medidaCorte) {
      alert('Preencha todos os campos');
      return;
    }

    const medidaStd = tipoRetifica === 'biela' ? selectedMotor.biela : parseFloat(selectedMotor.mancal.split('/')[0]);
    const atual = parseFloat(medidaAtual);
    const corte = parseFloat(medidaCorte);
    
    const deslocamento = medidaStd - corte;
    const contraPeso = selectedMotor.curso;
    
    setResultadoCalc({
      tipo: tipoRetifica === 'biela' ? 'BIELA' : 'MANCAL',
      medidaStd: medidaStd.toFixed(2),
      medidaAtual: atual.toFixed(2),
      medidaCorte: corte.toFixed(2),
      deslocamento: deslocamento.toFixed(2),
      contraPeso: contraPeso.toFixed(2),
      curso: selectedMotor.curso.toFixed(2)
    });
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white pb-20">
      {/* Header FIXO */}
      <div className="fixed top-0 left-0 right-0 z-50 bg-slate-900 shadow-xl">
        <div className="container mx-auto px-4 py-3 max-w-6xl">
          <div className="bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl p-4">
            <h1 className="text-2xl md:text-3xl font-bold text-center flex items-center justify-center gap-3">
              <Settings className="w-8 h-8" />
              RetÃ­fica de Virabrequim Pro
            </h1>
            <p className="text-center text-blue-100 text-sm mt-1">
              Conectado ao Google Sheets âœ…
            </p>
          </div>
        </div>
      </div>

      <div className="h-24"></div>

      <div className="container mx-auto px-4 max-w-6xl">
        {/* Tabs FIXO */}
        <div className="fixed top-24 left-0 right-0 z-40 bg-slate-900 border-b border-gray-700 pb-3 shadow-lg">
          <div className="container mx-auto px-4 max-w-6xl">
            <div className="grid grid-cols-3 gap-2">
              <button
                onClick={() => setActiveTab('consulta')}
                className={`py-3 px-2 rounded-lg font-semibold transition-all flex items-center justify-center gap-2 ${
                  activeTab === 'consulta' ? 'bg-blue-600 shadow-lg' : 'bg-gray-800 hover:bg-gray-700'
                }`}
              >
                <Database className="w-5 h-5" />
                <span className="text-sm">Consulta</span>
              </button>
              <button
                onClick={() => setActiveTab('calculadora')}
                className={`py-3 px-2 rounded-lg font-semibold transition-all flex items-center justify-center gap-2 ${
                  activeTab === 'calculadora' ? 'bg-blue-600 shadow-lg' : 'bg-gray-800 hover:bg-gray-700'
                }`}
              >
                <Calculator className="w-5 h-5" />
                <span className="text-sm">Calculadora</span>
              </button>
              <button
                onClick={() => setActiveTab('cadastro')}
                className={`py-3 px-2 rounded-lg font-semibold transition-all flex items-center justify-center gap-2 ${
                  activeTab === 'cadastro' ? 'bg-blue-600 shadow-lg' : 'bg-gray-800 hover:bg-gray-700'
                }`}
              >
                <Save className="w-5 h-5" />
                <span className="text-sm">Cadastro</span>
              </button>
            </div>
          </div>
        </div>

        <div className="h-20"></div>

        {/* CONSULTA */}
        {activeTab === 'consulta' && (
          <div>
            {/* Busca FIXO */}
            <div className="fixed top-44 left-0 right-0 z-30 bg-slate-900 pb-4">
              <div className="container mx-auto px-4 max-w-6xl">
                <div className="bg-gray-800 rounded-lg p-3 shadow-lg">
                  <div className="relative mb-2">
                    <Search className="absolute left-3 top-3 w-5 h-5 text-gray-400" />
                    <input
                      type="text"
                      placeholder="Buscar por marca, carro ou motor..."
                      value={searchTerm}
                      onChange={(e) => {
                        setSearchTerm(e.target.value);
                        // Busca em tempo real
                        if (e.target.value.trim()) {
                          pesquisarMotores(e.target.value);
                        } else {
                          carregarMotores();
                        }
                      }}
                      className="w-full pl-10 pr-4 py-2 bg-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    />
                  </div>
                  <button
                    onClick={carregarMotores}
                    disabled={loading}
                    className="w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-600 py-2 rounded-lg font-semibold flex items-center justify-center gap-2"
                  >
                    <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />
                    {loading ? 'Carregando...' : 'Atualizar Dados'}
                  </button>
                </div>
              </div>
            </div>

            <div className="h-32"></div>

            {/* Lista */}
            <div className="grid gap-4">
              {motoresFiltrados.length === 0 ? (
                <div className="text-center py-16 bg-gray-800 rounded-xl">
                  <Database className="w-20 h-20 mx-auto mb-4 text-gray-600" />
                  <p className="text-xl text-gray-400 mb-2">
                    {loading ? 'Carregando...' : 'Nenhum motor encontrado'}
                  </p>
                  {!loading && (
                    <button
                      onClick={carregarMotores}
                      className="mt-4 bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg font-semibold"
                    >
                      Carregar Dados
                    </button>
                  )}
                </div>
              ) : (
                motoresFiltrados.map(motor => (
                  <div
                    key={motor.id}
                    onClick={() => {
                      setSelectedMotor(motor);
                      setMedidaAtual('');
                      setMedidaCorte('');
                      setResultadoCalc(null);
                    }}
                    className={`bg-gray-800 rounded-lg p-4 cursor-pointer transition-all hover:shadow-xl border-2 ${
                      selectedMotor?.id === motor.id ? 'border-blue-500 shadow-blue-500/50' : 'border-transparent hover:border-gray-600'
                    }`}
                  >
                    <div className="flex justify-between items-start mb-3">
                      <div>
                        <h3 className="text-lg font-bold text-blue-400">{motor.marca}</h3>
                        <p className="text-gray-400 text-sm">{motor.carro}</p>
                        <p className="text-gray-300 text-xs">{motor.motor}</p>
                      </div>
                      <span className="bg-gradient-to-r from-blue-500 to-indigo-500 text-white px-2 py-1 rounded-full text-xs font-semibold">
                        {motor.diametro || 'N/A'}
                      </span>
                    </div>

                    <div className="grid grid-cols-3 md:grid-cols-5 gap-2 text-sm">
                      <div className="bg-gradient-to-br from-green-600 to-green-700 rounded-lg p-2">
                        <span className="text-green-100 block text-xs font-semibold">FIXO</span>
                        <span className="font-bold text-xl">{motor.fixo || '0'}</span>
                      </div>
                      <div className="bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg p-2">
                        <span className="text-yellow-100 block text-xs font-semibold">BIELA</span>
                        <span className="font-bold text-xl">{motor.biela || '0'}</span>
                      </div>
                      <div className="bg-gradient-to-br from-purple-600 to-pink-600 rounded-lg p-2">
                        <span className="text-purple-100 block text-xs font-semibold">CURSO</span>
                        <span className="font-bold text-xl">{motor.curso || '0'}</span>
                      </div>
                      <div className="bg-gray-700 rounded-lg p-2">
                        <span className="text-gray-400 block text-xs">Lateral</span>
                        <span className="font-bold text-lg">{motor.lateral || '0'}</span>
                      </div>
                      <div className="bg-gray-700 rounded-lg p-2">
                        <span className="text-gray-400 block text-xs">Mancal</span>
                        <span className="font-bold text-xs">{motor.mancal || 'N/A'}</span>
                      </div>
                    </div>
                    
                    {selectedMotor?.id === motor.id && (
                      <div className="mt-2 flex items-center gap-2 text-blue-400 text-sm">
                        <CheckCircle2 className="w-4 h-4" />
                        <span className="font-semibold">Selecionado</span>
                      </div>
                    )}
                  </div>
                ))
              )}
            </div>
          </div>
        )}

        {/* CALCULADORA */}
        {activeTab === 'calculadora' && (
          <div className="bg-gray-800 rounded-xl p-6">
            {selectedMotor ? (
              <div>
                <h2 className="text-2xl font-bold mb-4 text-blue-400">Calculadora</h2>
                
                <div className="bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg p-4 mb-4">
                  <p className="text-xl font-bold">{selectedMotor.marca}</p>
                  <p className="text-blue-100">{selectedMotor.carro} - {selectedMotor.motor}</p>
                </div>

                <div className="bg-gray-700 rounded-lg p-4 mb-4">
                  <label className="block text-sm font-semibold mb-3">Tipo:</label>
                  <div className="flex gap-4">
                    <label className="flex items-center gap-2 cursor-pointer">
                      <input
                        type="radio"
                        value="biela"
                        checked={tipoRetifica === 'biela'}
                        onChange={(e) => {
                          setTipoRetifica(e.target.value);
                          setMedidaAtual('');
                          setMedidaCorte('');
                        }}
                        className="w-5 h-5"
                      />
                      <span className="font-semibold text-yellow-400">BIELA ({selectedMotor.biela})</span>
                    </label>
                    <label className="flex items-center gap-2 cursor-pointer">
                      <input
                        type="radio"
                        value="mancal"
                        checked={tipoRetifica === 'mancal'}
                        onChange={(e) => {
                          setTipoRetifica(e.target.value);
                          setMedidaAtual('');
                          setMedidaCorte('');
                        }}
                        className="w-5 h-5"
                      />
                      <span className="font-semibold text-green-400">MANCAL ({selectedMotor.mancal})</span>
                    </label>
                  </div>
                </div>

                <div className="bg-gray-700 rounded-lg p-4 mb-4">
                  <label className="block text-sm font-semibold mb-2">STD (AutomÃ¡tico):</label>
                  <div className="text-3xl font-bold text-blue-400">
                    {tipoRetifica === 'biela' ? (selectedMotor.biela || 0).toFixed(2) : (selectedMotor.mancal?.split('/')[0] || 0)} mm
                  </div>
                </div>

                <div className="mb-4">
                  <label className="block text-sm font-semibold mb-2">Medida Atual:</label>
                  <input
                    type="number"
                    step="0.01"
                    value={medidaAtual}
                    onChange={(e) => setMedidaAtual(e.target.value)}
                    placeholder="Ex: 47.60"
                    className="w-full px-4 py-3 bg-gray-700 rounded-lg text-white text-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  />
                </div>

                <div className="mb-4">
                  <label className="block text-sm font-semibold mb-2">Medida de Corte:</label>
                  <select
                    value={medidaCorte}
                    onChange={(e) => setMedidaCorte(e.target.value)}
                    className="w-full px-4 py-3 bg-gray-700 rounded-lg text-white text-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  >
                    <option value="">Selecione</option>
                    {[0.25, 0.50, 0.75, 1.00].map(medida => {
                      const medidaStd = tipoRetifica === 'biela' ? (selectedMotor.biela || 0) : parseFloat(selectedMotor.mancal?.split('/')[0] || 0);
                      const valorCorte = (medidaStd - medida).toFixed(2);
                      return (
                        <option key={medida} value={valorCorte}>
                          {valorCorte} mm (-{medida.toFixed(2)} mm)
                        </option>
                      );
                    })}
                  </select>
                </div>

                <button
                  onClick={calcularDeslocamento}
                  disabled={!medidaAtual || !medidaCorte}
                  className="w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:bg-gray-600 py-4 rounded-lg font-bold text-lg"
                >
                  Calcular
                </button>

                {resultadoCalc && (
                  <div className="mt-6 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl p-6">
                    <h3 className="text-2xl font-bold mb-4 text-center">Resultado</h3>
                    
                    <div className="bg-white/10 rounded-lg p-4 space-y-2 mb-4">
                      <div className="flex justify-between">
                        <span>Tipo:</span>
                        <span className="font-bold">{resultadoCalc.tipo}</span>
                      </div>
                      <div className="flex justify-between">
                        <span>STD:</span>
                        <span className="font-bold">{resultadoCalc.medidaStd} mm</span>
                      </div>
                      <div className="flex justify-between">
                        <span>Atual:</span>
                        <span className="font-bold">{resultadoCalc.medidaAtual} mm</span>
                      </div>
                      <div className="flex justify-between">
                        <span>Corte:</span>
                        <span className="font-bold text-yellow-300">{resultadoCalc.medidaCorte} mm</span>
                      </div>
                      <div className="border-t border-white/30 pt-2">
                        <div className="flex justify-between">
                          <span>Removido:</span>
                          <span className="font-bold text-xl text-red-300">{resultadoCalc.deslocamento} mm</span>
                        </div>
                      </div>
                    </div>

                    <div className="bg-yellow-400 text-gray-900 rounded-xl p-6">
                      <p className="text-sm font-bold text-center mb-2">CONTRA PESO</p>
                      <p className="text-5xl font-bold text-center">{resultadoCalc.contraPeso} mm</p>
                      <p className="text-xs text-center mt-2">Baseado no curso: {resultadoCalc.curso} mm</p>
                    </div>
                  </div>
                )}
              </div>
            ) : (
              <div className="text-center py-16">
                <Database className="w-20 h-20 mx-auto mb-4 text-gray-600" />
                <p className="text-xl text-gray-400 mb-2">Nenhum motor selecionado</p>
                <button
                  onClick={() => setActiveTab('consulta')}
                  className="mt-4 bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg font-semibold"
                >
                  Ir para Consulta
                </button>
              </div>
            )}
          </div>
        )}

        {/* CADASTRO */}
        {activeTab === 'cadastro' && (
          <div className="bg-gray-800 rounded-xl p-6">
            <h2 className="text-2xl font-bold mb-4 text-blue-400">Cadastrar Novo Motor</h2>
            <p className="text-sm text-gray-400 mb-4">
              ObrigatÃ³rio: <span className="text-yellow-400">Marca, Carro, Motor, Biela, Curso</span>
            </p>
            
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <div>
                <label className="block text-sm font-semibold mb-2">Marca *</label>
                <input
                  type="text"
                  value={novoMotor.marca}
                  onChange={(e) => setNovoMotor({...novoMotor, marca: e.target.value})}
                  placeholder="Ex: PALIO/UNO/SIENA"
                  className="w-full px-4 py-3 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>

              <div>
                <label className="block text-sm font-semibold mb-2">Carro *</label>
                <input
                  type="text"
                  value={novoMotor.carro}
                  onChange={(e) => setNovoMotor({...novoMotor, carro: e.target.value})}
                  placeholder="Ex: FIRE 1.0 141C2000"
                  className="w-full px-4 py-3 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>

              <div>
                <label className="block text-sm font-semibold mb-2">Motor *</label>
                <input
                  type="text"
                  value={novoMotor.motor}
                  onChange={(e) => setNovoMotor({...novoMotor, motor: e.target.value})}
                  placeholder="Ex: 48,00"
                  className="w-full px-4 py-3 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>

              <div>
                <label className="block text-sm font-semibold mb-2">Fixo</label>
                <input
                  type="number"
                  step="0.01"
                  value={novoMotor.fixo}
                  onChange={(e) => setNovoMotor({...novoMotor, fixo: e.target.value})}
                  placeholder="Ex: 38,00"
                  className="w-full px-4 py-3 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>

              <div>
                <label className="block text-sm font-semibold mb-2">Biela *</label>
                <input
                  type="number"
                  step="0.01"
                  value={novoMotor.biela}
                  onChange={(e) => setNovoMotor({...novoMotor, biela: e.target.value})}
                  placeholder="Ex: 24,00"
                  className="w-full px-4 py-3 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>

              <div>
                <label className="block text-sm font-semibold mb-2">Lateral</label>
                <input
                  type="number"
                  step="0.01"
                  value={novoMotor.lateral}
                  onChange={(e) => setNovoMotor({...novoMotor, lateral: e.target.value})}
                  placeholder="Ex: 32,45"
                  className="w-full px-4 py-3 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>

              <div>
                <label className="block text-sm font-semibold mb-2">Curso *</label>
                <input
                  type="number"
                  step="0.01"
                  value={novoMotor.curso}
                  onChange={(e) => setNovoMotor({...novoMotor, curso: e.target.value})}
                  placeholder="Ex: 21,00"
                  className="w-full px-4 py-3 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>

              <div>
                <label className="block text-sm font-semibold mb-2">Mancal</label>
                <input
                  type="text"
                  value={novoMotor.mancal}
                  onChange={(e) => setNovoMotor({...novoMotor, mancal: e.target.value})}
                  placeholder="Ex: 78,70"
                  className="w-full px-4 py-3 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>

              <div>
                <label className="block text-sm font-semibold mb-2">DiÃ¢metro</label>
                <input
                  type="text"
                  value={novoMotor.diametro}
                  onChange={(e) => setNovoMotor({...novoMotor, diametro: e.target.value})}
                  placeholder="Ex: 70,00X64,90"
                  className="w-full px-4 py-3 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>

              <div>
                <label className="block text-sm font-semibold mb-2">Altura</label>
                <input
                  type="text"
                  value={novoMotor.altura}
                  onChange={(e) => setNovoMotor({...novoMotor, altura: e.target.value})}
                  placeholder="Ex: 41,12/41,14"
                  className="w-full px-4 py-3 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>

              <div>
                <label className="block text-sm font-semibold mb-2">Ferro</label>
                <input
                  type="text"
                  value={novoMotor.ferro}
                  onChange={(e) => setNovoMotor({...novoMotor, ferro: e.target.value})}
                  placeholder="Ex: 70,00"
                  className="w-full px-4 py-3 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
              </div>
            </div>

            <button
              onClick={salvarMotor}
              disabled={loading}
              className="w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 disabled:bg-gray-600 py-4 rounded-lg font-bold text-lg"
            >
              {loading ? 'ðŸ’¾ Salvando...' : 'ðŸ’¾ Cadastrar Motor'}
            </button>

            <div className="mt-4 bg-green-900/30 border border-green-500 rounded-lg p-4">
              <p className="text-sm text-green-200 font-semibold">
                âœ… Google Sheets Conectado!
              </p>
              <p className="text-xs text-green-300 mt-1">
                Os motores sÃ£o salvos automaticamente na sua planilha do Google Sheets
              </p>
            </div>
          </div>
        )}
      </div>
    </div>
  );
};
